<div class="bg-white rounded-2xl p-4 border border-gray-100 shadow-sm hover:shadow-md hover:border-indigo-200 transition-all duration-200 cursor-pointer group relative overflow-hidden h-full flex flex-col"
     (click)="onCardClick()"
     tabindex="0"
     [attr.aria-label]="'Ver grupo ' + group.name">
  
  <div class="flex items-start gap-4 flex-1">
    <div [class]="'w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 text-3xl ' + getIconBackground()">
      {{ getGroupIcon() }}
    </div>
    
    <div class="flex-1 min-w-0">
      <h3 class="font-bold text-gray-900 text-lg leading-tight mb-1 truncate pr-2">
        {{ group.name }}
      </h3>
      <p class="text-gray-500 text-sm mb-3 line-clamp-2 leading-relaxed">
        {{ group.description || 'Sin descripciÃ³n' }}
      </p>
    </div>
  </div>

  <div class="flex items-center justify-between mt-4 pt-3 border-t border-gray-50">
    <span class="text-xs font-medium text-gray-400 bg-gray-50 px-2 py-1 rounded-lg flex items-center gap-1">
      ðŸ‘¥ {{ group.member_count }} miembros
    </span>

    <ng-container *ngIf="group.is_member; else joinButton">
      <div class="flex items-center gap-2">
        <span class="text-xs font-bold text-green-600 bg-green-50 px-2 py-1 rounded border border-green-100">
          âœ… Miembro
        </span>
        <button (click)="onLeave($event)"
                [disabled]="isLoading"
                class="text-xs text-red-300 hover:text-red-500 p-1 hover:bg-red-50 rounded transition-colors"
                title="Salir del grupo">
            {{ isLoading ? '...' : 'âœ•' }}
        </button>
      </div>
    </ng-container>

    <ng-template #joinButton>
      <button (click)="onJoin($event)"
              [disabled]="isLoading"
              class="bg-indigo-600 text-white text-xs font-bold px-4 py-2 rounded-xl shadow-sm hover:bg-indigo-700 active:scale-95 transition-all flex items-center gap-2 disabled:opacity-50">
        <span *ngIf="isLoading" class="w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
        <span>Unirme</span>
      </button>
    </ng-template>
  </div>
</div>